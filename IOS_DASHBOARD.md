# לוח בקרה: פיתוח אפליקציית iOS (Urbanito)

## 🎯 יעד עסקי
**מקסימום יעילות וחשיפה:** השקת אפליקציית iOS טבעית (Native) במינימום מאמץ פיתוח, על ידי שימוש בקוד הקיים של האתר.
**קהל יעד:** משתמשים המעדיפים אפליקציות מותקנות לנוחות (התראות, עבודה ברקע) ואמינות (נוכחות ב-App Store).

## 🛠 אסטרטגיה טכנית: אפליקציה היברידית
אנו משתמשים ב-**Capacitor** כדי לעטוף את אפליקציית ה-React הקיימת.

*   **שפה עיקרית:** TypeScript / React (הקוד הקיים של האתר).
*   **גשר לנייטיב (Native Bridge):** ספריית Capacitor (מטפלת בתקשורת בין הווב למכשיר).
*   **קוד נייטיב (Swift/Obj-C):** מינימלי ביותר. משמש רק להגדרות (`Info.plist`) או לפלאגינים ספציפיים אם חסר משהו בווב.

### 🚫 איך אנחנו מונעים כפילות פיתוח (DRY)?
1.  **מקור אמת יחיד (Single Source of Truth):** אנו מתחזקים **מאגר קוד אחד בלבד**. התיקייה `src/` מכילה את הקוד שרץ גם באתר וגם באפליקציה.
2.  **עיצוב רספונסיבי (Mobile-First):** הממשק כבר בנוי למובייל. אנחנו לא יוצרים "מסכים מיוחדים ל-iOS".
3.  **אבסטרקציות (הפשטה):** אנו משתמשים ב-API סטנדרטי של ווב (כמו `navigator.geolocation`). Capacitor יודע לתרגם את זה אוטומטית ל-GPS של האייפון. אנו נמנעים מכתיבת תנאים של "אם זה iOS תעשה X" אלא אם זה ממש הכרחי (למשל עבור Safe Areas).

---

## 🗺️ מפת דרכים וסטטוס (Roadmap)

### שלב 1: תשתית והקמות (✅ הושלם)
*   **מטרה:** לגרום לאפליקציית הווב לרוץ בתוך "קופסה" של iOS.
*   [x] התקנת ספריות Capacitor (`core`, `ios`, `cli`).
*   [x] אתחול פרויקט iOS.
*   [x] הגדרת הרשאות בסיסיות (מיקום) בקובץ `Info.plist`.
*   [x] ביצוע Build ראשוני וסנכרון הקוד.

### שלב 2: תחושת "נייטיב" וליטוש (🚧 בתהליך)
*   **מטרה:** שזה ירגיש כמו אפליקציה, לא כמו אתר אינטרנט.
*   [x] **"אזורים בטוחים" (Safe Areas):** טיפול ב"מגרעת" (Notch) ובפס הבית של האייפון כך שהתוכן לא יוסתר.
*   [x] **התנהגות מגע:** ביטול זום, גלילת-יתר (Overscroll) ובחירת טקסט כדי למנוע תחושת "דפדפן".
*   [ ] **אייקון ומסך פתיחה:** החלפת הלוגו של Capacitor בלוגו של Urbanito.
*   [ ] **Deep Linking:** אפשרות לפתוח קישורים (`urbanito://`) ישירות באפליקציה (חשוב להתחברות וכניסה משיתופים).
*   [ ] **עבודה ברקע:** וידוא שהמדריך הקולי ממשיך לנגן כשהמסך נעול.

### שלב 3: חנות האפליקציות ושחרור (📅 השלב הבא)
*   **מטרה:** לעבור את הבדיקה של אפל (App Store Review).
*   [ ] **הצהרת פרטיות:** הגדרת השימוש במיקום ובנתוני משתמש מול אפל.
*   [ ] **צילומי מסך:** הפקת תמונות שיווקיות לחנות בגדלים המתאימים.
*   [ ] **TestFlight:** העלאת גרסה לבדיקות פנימיות.
*   [ ] **הגשה לחנות (Submission).**

---

## 📌 עקרונות מנחים לפיתוח
1.  **Web First:** תמיד מפתחים קודם עבור הדפדפן. אם זה עובד בכרום במובייל, זה אמור לעבוד גם ב-iOS.
2.  **בלי "Ejecting":** לא משנים ידנית קבצים בתוך תיקיית `ios/` אלא אם זו הגדרת קונפיגורציה. כל הלוגיקה נשארת ב-TypeScript.
3.  **בדיקה על מכשיר אמיתי:** הסימולטור מצוין, אבל התנהגות GPS וסוללה אמיתית בודקים רק על אייפון פיזי.

## 🚀 צעדים הבאים לביצוע מיידי
1.  **יצירת נכסים גרפיים:** הכנת אייקונים ומסכי פתיחה בכל הגדלים הנדרשים.
2.  **בדיקת התחברות:** וידוא ש-Google Login עובד בתוך האפליקציה (דורש הגדרת URL Scheme).
3.  **הרצה ב-Xcode:** משיכת הקוד למחשב מקומי והרצה על סימולטור/מכשיר.
